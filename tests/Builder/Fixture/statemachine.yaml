name: video-transcoding
states:
  new:
    initial: true
    input_schema:
      transcoding_required:
        type: bool
    settings:
      foo: bar
    transitions:
      ready: ~
      prepare:
        when: input.get("transcoding_required") == true

  prepare:
    transitions:
      transcoding:
        class: Workflux\Tests\Builder\Fixture\AlwaysTrueTransition

  transcoding:
    transitions:
      ready: ~
      error: output.get("transcode_success") == false and output.get("retry_limit_reached") == true
      rejected:
        settings:
          label: yeah right
          more_stuff: true
        when:
          - output.get("retry_limit_reached") == false
          - output.get("transcode_success") == false

  error: ~
  rejected: ~
  ready: ~
